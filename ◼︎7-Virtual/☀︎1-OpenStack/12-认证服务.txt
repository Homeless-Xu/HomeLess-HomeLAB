â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸------â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸
ğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µ è®¤è¯æœåŠ¡ ğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µ
â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸------â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸
ğŸ”¸ ç®€ä»‹.

    ä¼ä¸šäº‘. çš„ç¬¬ä¸€æ­¥è‚¯å®šæ˜¯ç™»å½•!  ä¹Ÿå°±æ˜¯è®¤è¯. 
    ä¸åŒçš„ç”¨æˆ· å¯ä»¥åˆ†é…åˆ°ä¸åŒçš„èµ„æº (cpu/å†…å­˜/ç¡¬ç›˜...)
    æ‰€ä»¥ openstack é¦–å…ˆè¦å®‰è£…çš„å°±æ˜¯ è®¤è¯æœåŠ¡. 


ğŸ”¸ Admin Token
    æ‰€æœ‰æœåŠ¡å…±äº«çš„ä¸€ä¸ªå¯†é’¥ï¼Œå¦‚æœè®¾ç½®ä¸åŒï¼Œé‚£äº›ä¾èµ–keystoneçš„æœåŠ¡å°†æ— æ³•æ­£å¸¸å·¥ä½œ.



ğŸ”¸ Tenants
    Tenants æ˜¯ä¸€ä¸ªé«˜å±‚æ¬¡çš„ç»„ï¼Œè¡¨ç¤ºä¸€ç»„ç”¨æˆ·ã€‚
    ä¸€ä¸ªtenant æ˜¯ä¸€ä¸ªå°ç»„ï¼Œå…±åŒæ‹¥æœ‰ Novaé‡Œçš„è™šæ‹Ÿæœºï¼Œæˆ–è€…Swifté‡Œçš„å®¹å™¨ã€‚
    ä¸€ä¸ªtenantå¯ä»¥æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªç”¨æˆ·ï¼Œ
    ç”¨æˆ·å¯ä»¥å±äºä¸€ä¸ªæˆ–è€…å¤šä¸ªtenantï¼Œ
    é’ˆå¯¹æ¯ä¸ªtenantï¼Œç”¨æˆ·æ‹¥æœ‰ä¸€ä¸ªè§’è‰²(role)

    è®¤è¯å‡ ä¸ªè¦ç´ ï¼štenants, users, roles

    ä¸šåŠ¡ç«¯å£ï¼š5000
    ç®¡ç†ç«¯å£ï¼š35357



ğŸ”¸ ç®¡ç†APIæµ‹è¯•ï¼š
    è·å–ç‰ˆæœ¬å·ï¼š
    curl http://192.168.28.5:35357/ | python -mjson.tool
    curl http://192.168.28.5:35357/v2.0/ | python -mjson.tool

ğŸ”¸ ä¸šåŠ¡API æµ‹è¯•ï¼š
    è·å–ç‰ˆæœ¬å·ï¼š
    curl http://192.168.1.112:5000/ | python -mjson.tool
    curl http://192.168.1.112:5000/v2.0/ | python -mjson.tool







ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸å‡†å¤‡ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸
    åœ¨ä½ é…ç½® OpenStack èº«ä»½è®¤è¯æœåŠ¡å‰ï¼Œä½ å¿…é¡»åˆ›å»ºä¸€ä¸ªæ•°æ®åº“å’Œç®¡ç†å‘˜ä»¤ç‰Œ

ğŸ”¸ åˆ›å»º æ•°æ®åº“ 

    â¦¿ å¯åŠ¨:   systemctl start mariadb.service
    â¦¿ çŠ¶æ€:   systemctl status mariadb.service
    â¦¿ ç™»å½•:   mysql -u root -p         æ— å¯†ç ç›´æ¥å›è½¦å°±è¡Œ.
    â¦¿ ç™»å½•:   mysql -u root -ptoor      æœ‰å¯†ç ,å¯†ç å¯ä»¥ç›´æ¥å†™åœ¨ -p åé¢. 
    â¦¿ åˆ›å»ºï¼š  CREATE DATABASE keystone;
    â¦¿ æƒé™ï¼š  
        ä½œç”¨å°±æ˜¯ åœ¨æ•°æ®åº“ä¸­åˆ›å»º keystone ç”¨æˆ·, å¹¶ç»™äºˆlocalhost å’Œ % æƒé™
        % æƒé™å°±æ˜¯ ä½ å¯ä»¥ç”¨ keystone é€šè¿‡å¤–ç½‘è¿æ¥æ•°æ®åº“. 
        ç”¨è‡ªå·±çš„çš„å¯†ç æ›¿æ¢ KEYSTONE_DBPASS 
        
        GRANT ALL PRIVILEGES ON keystone.* TO 'keystone'@'localhost' IDENTIFIED BY 'KEYSTONE_DBPASS';
        GRANT ALL PRIVILEGES ON keystone.* TO 'keystone'@'%' IDENTIFIED BY 'KEYSTONE_DBPASS';

    â¦¿ é€€å‡º:   exit;



ğŸ”¸ å¼€å¯ root ç”¨æˆ·æ•°æ®åº“å¤–ç½‘è®¿é—® (å¯é€‰)
    å°±æ˜¯æŠŠ root ::1 æ”¹ä¸‹ root % . å°±æœ‰å¤–ç½‘æƒé™äº†.

    mysql -u root -p
    use mysql;   
    select user,host from user; 
    UPDATE mysql.user SET host='%' WHERE host='::1';
    select user,host from user;
    flush privileges;


ğŸ”¸ æ•°æ®åº“æ£€éªŒ 
    Mac ç”µè„‘:
        å›¾å½¢å·¥å…· ç”¨ root ç™»å½• mysql æ•°æ®åº“.  æŸ¥çœ‹æ˜¯å¦ keystone æ•°æ®åº“.

    Mac ç”µè„‘: 
        mysql -h 192.168.1.111 -u keystone -pKEYSTONE_DBPASS
        çœ‹çœ‹èƒ½å¦ç™»å½•.



ğŸ”¸ ç”Ÿæˆç®¡ç†å‘˜ä»¤ç‰Œ
    å°±æ˜¯ä¸€ä¸²æ•°å­—è€Œå·². è¦è®°ä½. ä¸‹é¢æœ‰ç”¨.
    openssl rand -hex 10
        fe8e78e52229f610fa0e



ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ å®‰è£…  keystone ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸

ğŸ”¸ keystone å®‰è£…:    yum install openstack-keystone httpd mod_wsgi -y 

    ğŸ‘¹ Error downloading packages:
        python-sqlalchemy-1.0.11-1.el7.x86_64: [Errno 256] No more mirrors to try.
        python2-babel-2.3.4-1.el7.noarch: [Errno 256] No more mirrors to try.
        python-routes-1.13-2.el7.noarch: [Errno 256] No more mirrors to try.
        python-netaddr-0.7.18-1.el7.noarch: [Errno 256] No more mirrors to try.

        ä¸ªåˆ«å®‰è£…åŒ… ä¸‹è½½ä¸äº†. 
        è§£å†³åŠæ³•:   yum clean metadata && yum clean all
        ç„¶åé‡æ–°å®‰è£….





ğŸ”¸ keystone é…ç½®:    vi /etc/keystone/keystone.conf 

    â¦¿ [database] ä¸‹æ·»åŠ è¡Œ 
        connection = mysql+pymysql://keystone:KEYSTONE_DBPASS@controller/keystone
        å°†``KEYSTONE_DBPASS``æ›¿æ¢ä¸ºä½ ä¸ºKEYSTONEæ•°æ®åº“è®¾ç½®çš„å¯†ç ã€‚

    â¦¿ [token] ä¸‹æ·»åŠ è¡Œ. æ— éœ€ä¿®æ”¹
        provider = fernet

ğŸ”¸ keystone é…ç½®æ£€éªŒ 
    cat /etc/keystone/keystone.conf | grep ^connection
    cat /etc/keystone/keystone.conf | grep ^provider



ğŸ”¸ åˆå§‹åŒ–èº«ä»½è®¤è¯æœåŠ¡çš„æ•°æ®åº“ï¼š åŒæ­¥keystoneæ•°æ®åº“ 
    su -s /bin/sh -c "keystone-manage db_sync" keystone

            â¦¿ å‘½ä»¤è§£æ
                â€¢ su -s :
                    è‹¥ /etc/shells å…è®¸ï¼Œåˆ™è¿è¡Œ shell; 
                    /etc/shells é‡Œé¢åŒ…å«æœ¬æœºå®‰è£…çš„æ‰€æœ‰shell;
                â€¢ -c "keystone-manage db_sync"
                    å¼•å·é‡Œé¢å°±æ˜¯è¦æ‰§è¡Œçš„ shell å‘½ä»¤.
                â€¢ keystone
                    ç”¨è¿™ä¸ªç”¨æˆ·è¿è¡Œå‘½ä»¤.

            â¦¿ CLIâˆ™1 ~ âœ type keystone-manage
                keystone-manage is /usr/bin/keystone-manage

            â¦¿ CLIâˆ™1 ~ âœ cat /usr/bin/keystone-manage     å‘ç°æ˜¯ä¸ª python æ–‡ä»¶!
                #!/usr/bin/python2
                # PBR Generated from u'console_scripts'
                import sys
                from keystone.cmd.manage import main
                if __name__ == "__main__":
                    sys.exit(main())



ğŸ”¸ åˆå§‹åŒ–Fernet keysï¼š
    keystone-manage fernet_setup --keystone-user keystone --keystone-group keystone
    keystone-manage credential_setup --keystone-user keystone --keystone-group keystone


ğŸ”¸ å¯åŠ¨ è®¤è¯æœåŠ¡
    è¿™é‡Œéœ€è¦è®¾ç½® keystone çš„å¯†ç .  ADMIN_PASS æ”¹æˆä½ æƒ³è®¾ç½®çš„å¯†ç .

    keystone-manage bootstrap --bootstrap-password ADMIN_PASS \
    --bootstrap-admin-url http://controller:35357/v3/ \
    --bootstrap-internal-url http://controller:5000/v3/ \
    --bootstrap-public-url http://controller:5000/v3/ \
    --bootstrap-region-id RegionOne

    
    â¦¿ è®¤è¯æœåŠ¡ç«¯å£éªŒè¯
        nmap -p 5000,35357 127.0.0.1


ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ é…ç½® Apache  HTTP æœåŠ¡å™¨ ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸

ğŸ”¸ Apache é…ç½® 
    vi /etc/httpd/conf/httpd.conf
        #ServerName www.example.com:80  æ”¹æˆ  ServerName controller


ğŸ”¸ åˆ›å»ºè½¯é“¾æ¥ 
    è¿™æ · apache æ‰ä¼šåŠ è½½ /usr/share/keystone/wsgi-keystone.conf è¿™ä¸ªApacheé…ç½®æ–‡ä»¶
    ln -s /usr/share/keystone/wsgi-keystone.conf /etc/httpd/conf.d/


ğŸ”¸ Apache  å¼€æœºè‡ªå¯   systemctl enable httpd.service
ğŸ”¸ Apache  å¯åŠ¨æœåŠ¡   systemctl start httpd.service

ğŸ”¸ é…ç½®ç¯å¢ƒå˜é‡ 
    ä¸‹é¢çš„å‘½ä»¤ ç›´æ¥åœ¨ç»ˆç«¯é‡Œé¢è¿è¡Œå°±å¯ä»¥äº†.
    ADMIN_PASS æ”¹æˆä¸Šé¢è®¾ç½®å¯åŠ¨è®¤è¯æœåŠ¡æ—¶å€™è®¾ç½®çš„å¯†ç .

        export OS_USERNAME=admin
        export OS_PASSWORD=ADMIN_PASS
        export OS_PROJECT_NAME=admin
        export OS_USER_DOMAIN_NAME=Default
        export OS_PROJECT_DOMAIN_NAME=Default
        export OS_AUTH_URL=http://controller:35357/v3
        export OS_IDENTITY_API_VERSION=3


        â¦¿ Export å‘½ä»¤
            åœ¨shellä¸­æ‰§è¡Œç¨‹åºæ—¶ï¼Œshellä¼šæä¾›ä¸€ç»„ç¯å¢ƒå˜é‡ã€‚
            export å‘½ä»¤ è®¾ç½®ç¯å¢ƒå˜é‡ç”¨. å¯ä»¥ç”¨ export æŸ¥çœ‹å½“å‰è®¾ç½®.
            exportå¯æ–°å¢ï¼Œä¿®æ”¹æˆ–åˆ é™¤ç¯å¢ƒå˜é‡ï¼Œä¾›åç»­æ‰§è¡Œçš„ç¨‹åºä½¿ç”¨
            exportçš„æ•ˆåŠ›ä»…åŠäºè¯¥æ¬¡ç™»é™†æ“ä½œ

            â€¢ æ·»åŠ å˜é‡:  export OS_TOKEN=fe8e78e52229f610fa0e  å…³é—­ç»ˆç«¯å¤±æ•ˆ.
            â€¢ æ›´æ–°å˜é‡:  export OS_TOKEN=fe8e78e52229f610fa00  é‡å¤æ·»åŠ ä¼šè¦†ç›–
            â€¢ åˆ é™¤å˜é‡:  unset OS_TOKEN
            â€¢ æŸ¥çœ‹å˜é‡:  echo $OS_TOKEN      echo $OS_USERNAME




ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸Create a domain, projects, users, and rolesğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸

ğŸ”¸ åºŸè¯
    openstack å¯¹å®‰å…¨æ˜¯æå…¶ä¸¥æ ¼çš„.  å‡ ä¹ä»»ä½•æ“ä½œéƒ½è¦è¿›è¡Œèº«ä»½è®¤è¯.
    æ ¸å¿ƒæœåŠ¡ä¹Ÿå°±å‡ ä¸ª. ä½†æ˜¯ ä¼ä¸šäº‘çš„ç”¨æˆ·å´æ˜¯æˆåƒä¸Šä¸‡çš„.
    æ¯ä¸ªç”¨æˆ·å¯¹å„ä¸ªæœåŠ¡çš„æƒé™ä¹Ÿä¸ä¸€æ ·çš„. å°±åƒæ¯ä¸ª vps çš„ç¡¬ç›˜ã€å†…å­˜ã€cpu ç­‰é…ç½®éƒ½æ˜¯ä¸ä¸€æ ·çš„.
    èº«ä»½è®¤è¯æœåŠ¡ ç»™æ‰€æœ‰çš„ openstack æ ¸å¿ƒæœåŠ¡æä¾›éªŒè¯åŠŸèƒ½.
    èº«ä»½è®¤è¯æœåŠ¡ æ ¹æ®: domains, projects, users, and roles. æ¥æ§åˆ¶æƒé™.
    æ‰€ä»¥æˆ‘ä»¬è¦ åˆ›å»º domain, projects, users, and roles




ğŸ”¸ åˆ›å»º service project:
    openstack project create --domain default --description "Service Project" service
       ğŸ‘â€ğŸ—¨ yum install python-openstackclient å°±å®‰è£…äº† openstack è¿™ä¸ªå‘½ä»¤äº†.
        ğŸ‘¹ Unable to establish connection to http://controller:35357/v3/auth/tokens: 
            â¦¿ æŸ¥çœ‹ apache çŠ¶æ€   systemctl status httpd.service âœ”ï¸
            â¦¿ æ¸…ç©ºé˜²ç«å¢™  iptables -F âœ”ï¸
            â¦¿ æŸ¥çœ‹é˜²ç«å¢™  iptables -L âœ”ï¸
            â¦¿ ç«¯å£æŸ¥çœ‹ nmap -p 5000,35357 127.0.0.1 âœ”ï¸
                keystone v3 ç‰ˆæœ¬çš„è¯ï¼Œ5000 å’Œ 35357 è¿™ä¸¤ä¸ªç«¯å£çš„ä½¿ç”¨åŸºæœ¬æ²¡æœ‰åŒºåˆ«ï¼ŒAPI æ˜¯ä¸€è‡´çš„ã€‚
                5000 å’Œ 35357 ç«¯å£éƒ½æ˜¯ apache ç«¯å£! æ˜¯åœ¨ apache é‡Œé¢é…ç½®çš„. 
                æŸ¥çœ‹ä¸‹é¢è¿™ä¸ªæ–‡ä»¶  cat /usr/share/keystone/wsgi-keystone.conf

            â¦¿ é“¾æ¥çŠ¶æ€ âœ—
                curl http://controller:35357/  | python -mjson.tool
                ä¸èƒ½è§£æ controller  ä½ éœ€è¦æ‰‹åŠ¨è®¾ç½® host æ–‡ä»¶.å‘, è‡ªå·±æ¥å§ .
                echo "192.168.1.112 controller" >> /etc/hosts
                cat /etc/hosts
                æ³¨æ„ è¿™é‡Œç»å¯¹ä¸èƒ½ç”¨ 127.0.0.1 ä»£æ›¿ 192.168.1.112 . ä¼šå¼•èµ·å…¶ä»–æœåŠ¡å¯åŠ¨å¤±è´¥.
                ç„¶åé‡æ–°è¿è¡Œå‘½ä»¤.. å‡ºç°å¦å¤–ä¸€ä¸ªé”™è¯¯äº†...

                ğŸ‘¹ An unexpected error prevented the server from fulfilling your request.
                 (HTTP 500) (Request-ID: req-eb81db79-d32e-467d-ae04-d9b493935527)

                â¦¿ æ—¥å¿—åˆ†æ
                    â€¢ æ—¥å¿—ä½ç½®
                        cat /usr/share/keystone/wsgi-keystone.conf | grep ErrorLog
                            ErrorLog /var/log/httpd/keystone.log
                            CustomLog /var/log/httpd/keystone_access.log combined

                    â€¢ æ—¥å¿—æŸ¥çœ‹
                        cat /var/log/httpd/keystone.log  âœ ç©ºæ–‡ä»¶....
                        cat /var/log/httpd/keystone_access.log âœ  æœ‰å†…å®¹äº†!
                            "GET /v3 HTTP/1.1" 200 250 "-" "osc-lib/1.3.0 keystoneauth1/2.18.0 python-requests/2.11.1 CPython/2.7.5"
                            "POST /v3/auth/tokens HTTP/1.1" 500 143 "-" "osc-lib/1.3.0 keystoneauth1/2.18.0 python-requests/2.11.1 CPython/2.7.5"
                            get æ˜¯å®¢æˆ·ç«¯ä»ç½‘é¡µè·å–å†…å®¹.  post æ˜¯å®¢æˆ·ç«¯å‘ç½‘é¡µæäº¤å†…å®¹. æ¯”å¦‚ç”¨æˆ·ç™»å½•çš„ç”¨æˆ·åå’Œå¯†ç .
                            500 é”™è¯¯, é—®é¢˜åº”è¯¥å°±åœ¨Postè¿™è¡Œ.  keystoneauth1 è¿™æ–¹é¢é—®é¢˜.  åº”è¯¥å°±æ˜¯è®¤è¯æ–¹é¢çš„é—®é¢˜äº†.


                â¦¿ æµè§ˆå™¨åˆ†æ
                    mac æµè§ˆå™¨: http://192.168.1.112:35357/v3
                    {"version": {"status": "stable", "updated": "2017-02-22T00:00:00Z", "media-types": [{"base": "application/json", "type": "application/vnd.openstack.identity-v3+json"}], "id": "v3.8", "links": [{"href": "http://192.168.1.112:35357/v3/", "rel": "self"}]}}

                    mac æµè§ˆå™¨: http://192.168.1.112:35357/v3/auth
                    {"error": {"message": "\u627e\u4e0d\u5230\u8be5\u8d44\u6e90\u3002", "code": 404, "title": "Not Found"}}
                    è¿™ä¸ªé“¾æ¥å°±é”™äº†! 

                    mac æµè§ˆå™¨:  http://192.168.1.112:35357/v3/auth/token
                    {"error": {"message": "\u627e\u4e0d\u5230\u8be5\u8d44\u6e90\u3002", "code": 404, "title": "Not Found"}}


                â¦¿ é‡å¯æœåŠ¡å™¨. 
                
                    â€¢ æŸ¥çœ‹ Apache    WebæœåŠ¡å™¨çŠ¶æ€:  systemctl status httpd.service                   
                    â€¢ æŸ¥çœ‹ MariaDB   æ•°æ®åº“çŠ¶æ€:     systemctl status mariadb.service
                    â€¢ æŸ¥çœ‹ rabbitmq  æ¶ˆæ¯é˜Ÿåˆ—çŠ¶æ€:   systemctl status rabbitmq-server.service
                    â€¢ æŸ¥çœ‹ Mencached ç¼“å­˜çŠ¶æ€:       systemctl status memcached.service 
                        ğŸ‘¹ memcached[2740]: failed to listen on TCP port 11211: Address already in use
                        Mencached ç«¯å£è¢«å ç”¨.å¯åŠ¨å¤±è´¥, éš¾æ€ªéªŒè¯å‡ºé”™.è¿™ä¸ªæœåŠ¡å°±æ˜¯ç¼“å­˜ä»¤ç‰Œçš„...
                        nmap -p 11211 127.0.0.1 å‘ç°ç«¯å£ä¹Ÿæ²¡å¼€å¯å•Š. 

                        vi /etc/sysconfig/memcached
                        OPTIONS="-l 127.0.0.1,::1,controller"
                        æˆ‘ä»¬åœ¨ hsot é‡Œé¢ æŠŠ controller æ˜ å°„åˆ° 127.0.0.1 äº† è¿™é‡Œé‡å¤äº†! æ‰€ä»¥æŠ¥é”™!
                        è¦ vi /etc/hosts  contoll  æ”¹æˆæœ¬æœº ip: 192.168.1.112   è€Œä¸æ˜¯ 127.0.0.1...!

                        ç„¶åå¯åŠ¨ Mencached æœåŠ¡:  systemctl start memcached.service && systemctl status memcached.service 

                    â€¢ ç”Ÿæˆç®¡ç†å‘˜ä»¤ç‰Œ     âœ  openssl rand -hex 10   âœ 8259e4f5f9a15af6bef1  (ä¸ç”¨è®°ä¸‹æ¥çš„,)
                    â€¢ åŒæ­¥keystoneæ•°æ®åº“ âœ  su -s /bin/sh -c "keystone-manage db_sync" keystone

                    â€¢ åˆå§‹åŒ–Fernet keysï¼š
                        keystone-manage fernet_setup --keystone-user keystone --keystone-group keystone
                        keystone-manage credential_setup --keystone-user keystone --keystone-group keystone

                    â€¢ å¯åŠ¨è®¤è¯æœåŠ¡
                        keystone-manage bootstrap --bootstrap-password ADMIN_PASS \
                        --bootstrap-admin-url http://controller:35357/v3/ \
                        --bootstrap-internal-url http://controller:5000/v3/ \
                        --bootstrap-public-url http://controller:5000/v3/ \
                        --bootstrap-region-id RegionOne
                        
                    â€¢ è®¤è¯æœåŠ¡ç«¯å£éªŒè¯:   nmap -p 5000,35357 127.0.0.1
                    â€¢ å†æ¬¡è®¾ç½®ç¯å¢ƒå˜é‡ 
                        export OS_USERNAME=admin
                        export OS_PASSWORD=ADMIN_PASS
                        export OS_PROJECT_NAME=admin
                        export OS_USER_DOMAIN_NAME=Default
                        export OS_PROJECT_DOMAIN_NAME=Default
                        export OS_AUTH_URL=http://controller:35357/v3
                        export OS_IDENTITY_API_VERSION=3

                    â€¢ å°è¯•åˆ›å»º service project:
                        openstack project create --domain default --description "Service Project" service

                        +-------------+----------------------------------+
                        | Field       | Value                            |
                        +-------------+----------------------------------+
                        | description | Service Project                  |
                        | domain_id   | default                          |
                        | enabled     | True                             |
                        | id          | 347a8d619cb44cf493498084035eb7f8 |
                        | is_domain   | False                            |
                        | name        | service                          |
                        | parent_id   | default                          |
                        +-------------+----------------------------------+
                        ...  ç»ˆäºæˆåŠŸäº†é¢....  è¿™åªæ˜¯ä¸€ä¸ªç»„ä»¶çš„ä¸€ä¸ªå°è®¾ç½®è€Œå·²... åŠ æ²¹



ğŸ”¸ creates the demo project and user.
    ä¸Šé¢åˆ›å»ºçš„æ˜¯ æ­£å¼é¡¹ç›®. ä¸€èˆ¬çš„ éç®¡ç†å‘˜ç”¨æˆ· æœ€å¥½åˆ›å»ºä¸ª Demo é¡¹ç›®. 


â¦¿ åˆ›å»º demo é¡¹ç›®:
    openstack project create --domain default --description "Demo Project" demo
        +-------------+----------------------------------+
        | Field       | Value                            |
        +-------------+----------------------------------+
        | description | Demo Project                     |
        | domain_id   | default                          |
        | enabled     | True                             |
        | id          | ea376b3c10354873ae16fa6212f60983 |
        | is_domain   | False                            |
        | name        | demo                             |
        | parent_id   | default                          |
        +-------------+----------------------------------+

â¦¿ åˆ›å»º Demo ç”¨æˆ·:
    openstack user create --domain default --password-prompt demo
    éœ€è¦è®¾ç½® demoç”¨æˆ·çš„å¯†ç  . è¾“å…¥ä¸¤æ¬¡. è¿™é‡Œå¯†ç è®¾ç½®æˆ  demo
        +---------------------+----------------------------------+
        | Field               | Value                            |
        +---------------------+----------------------------------+
        | domain_id           | default                          |
        | enabled             | True                             |
        | id                  | 4a7e63e0da8d487e8d884d5fd05e7283 |
        | name                | demo                             |
        | options             | {}                               |
        | password_expires_at | None                             |
        +---------------------+----------------------------------+


â¦¿ åˆ›å»º User è¿™ä¸ªç”¨æˆ·è§’è‰²:
    openstack role create user  
        +-----------+----------------------------------+
        | Field     | Value                            |
        +-----------+----------------------------------+
        | domain_id | None                             |
        | id        | c0d7ea4d7a98417eb0da3b6a1f63ff6c |
        | name      | user                             |
        +-----------+----------------------------------+

â¦¿ æŠŠè§’è‰²æ·»åŠ åˆ° demo project  å’Œ demo user ä¸­
    openstack role add --project demo --user demo user





ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸éªŒè¯ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸


ğŸ”¸ å…³é—­ä¸´æ—¶è®¤è¯ä»¤ç‰Œæœºåˆ¶.
    ä¸Šé¢æˆ‘ä»¬åªæ˜¯éšä¾¿ç”Ÿæˆäº†ä¸€ä¸ª token . å°±èƒ½ç™»å½• è®¤è¯æœåŠ¡å™¨è¿›è¡Œå„ç§æ“ä½œ.
    è¿™ä¸ªæ˜¯éå¸¸ä¸å®‰å…¨çš„. æˆ‘ä»¬è¦å…³é—­ä¸´æ—¶ä»¤ç‰Œæœºåˆ¶. ç„¶åè·å–æ­£å¼ä»¤ç‰Œ.

    vi /etc/keystone/keystone-paste.ini 
    ä»``[pipeline:public_api]``ï¼Œ[pipeline:admin_api]``å’Œ``[pipeline:api_v3]``éƒ¨åˆ†åˆ é™¤``admin_token_auth ã€‚


ğŸ”¸ é‡é‡ç½®OS_AUTH_URL å’Œ OS_PASSWORD ç¯å¢ƒå˜é‡ï¼š ä¹Ÿå°±ä»ç¯å¢ƒè·¯å¾„ä¸­æ˜¯åˆ é™¤ è¿™ä¸¤ä¸ªå˜é‡.
    unset OS_AUTH_URL OS_PASSWORD


ğŸ”¸ ä¸º admin ç”¨æˆ·ç”³è¯·è®¤è¯ä»¤ç‰Œ

    openstack --os-auth-url http://controller:35357/v3 \
    --os-project-domain-name default --os-user-domain-name default \
    --os-project-name admin --os-username admin token issue

        éœ€è¦è¾“å…¥ admin çš„å¯†ç :  ADMIN_PASS
        +------------+------------------------------------------------------------------------------+
        | Field      | Value                                                                        |
        +------------+------------------------------------------------------------------------------+
        | expires    | 2017-08-25T11:01:19+0000                                                     |
        | id         | gAAAAABZn_VvsdSvjBR90MSBsD0W5QQPrfEAC2Yde9kUojvUNXc0zqK14IVLV1LBdzVJre10OEbU |
        |            | 2FtumsDHubvOtpCaHw-e-7lWbFbhKUTwDHqmYev6lP0rofLt4dLoz90XUYO1w8fqqlswTUIf7Tgo |
        |            | zT3Ufbyr82OFN_Zxbjr6wykmVLkLVQE                                              |
        | project_id | 48cbf0c9f5854d64aea5f260c7b7221e                                             |
        | user_id    | c5b9da77aae4451fbb0314352c1e653b                                             |
        +------------+------------------------------------------------------------------------------+


ğŸ”¸ ä¸º demo ç”¨æˆ·ç”³è¯·è®¤è¯ä»¤ç‰Œ
    openstack --os-auth-url http://controller:5000/v3 \
    --os-project-domain-name default --os-user-domain-name default \
    --os-project-name demo --os-username demo token issue
        éœ€è¦è¾“å…¥ demo çš„å¯†ç : demo
        +------------+------------------------------------------------------------------------------+
        | Field      | Value                                                                        |
        +------------+------------------------------------------------------------------------------+
        | expires    | 2017-08-25T11:03:07+0000                                                     |
        | id         | gAAAAABZn_XbIlV1ZLMy6Ok3F-iZHUKS_6SmzPi7T3UISu_R9                            |
        |            | -J_ibiHo_Bc3ldsfclk6KvdOyqkJ0mQYRrS-PlQlWj2UMGMI-                            |
        |            | YsZHVTjbvYkcZdIlcZALG1vkvp2Ru-HSCwo53z6bJTYE05Sk10FojVbX2-yyAfqw--           |
        |            | NkSfj73R8ItP-b-f-lA                                                          |
        | project_id | ea376b3c10354873ae16fa6212f60983                                             |
        | user_id    | 4a7e63e0da8d487e8d884d5fd05e7283                                             |
        +------------+------------------------------------------------------------------------------+
        è¿™ä¸ªå‘½ä»¤ä½¿ç”¨``demo`` ç”¨æˆ·çš„å¯†ç å’ŒAPIç«¯å£5000ï¼Œè¿™æ ·åªä¼šå…è®¸å¯¹èº«ä»½è®¤è¯æœåŠ¡APIçš„å¸¸è§„ï¼ˆéç®¡ç†ï¼‰è®¿é—®ã€‚
        5000 ç«¯å£æ˜¯ä¸šåŠ¡ç«¯å£.   35357 ç«¯å£æ˜¯ç®¡ç†ç«¯å£. æƒé™ä¸ä¸€æ ·çš„!





ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸åˆ›å»º OpenStack å®¢æˆ·ç«¯ ç¯å¢ƒè„šæœ¬ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸

ğŸ”¸ è„šæœ¬ä½œç”¨.
    ä¸ç”¨æ¯æ¬¡éƒ½è®¾ç½® ç¯å¢ƒè·¯å¾„..
    è„šæœ¬æ–‡ä»¶ä½ç½®éšä¾¿.. å°± /root å§ .


ğŸ”¸ åˆ›å»ºè„šæœ¬.

    â¦¿ åˆ›å»º admin-openrc æ–‡ä»¶
        è®°å¾—æŠŠ ADMIN_PASS æ”¹æˆä½ è‡ªå·±çš„ admin ç”¨æˆ·çš„å¯†ç 
        vi admin-openrc
            export OS_PROJECT_DOMAIN_NAME=Default
            export OS_USER_DOMAIN_NAME=Default
            export OS_PROJECT_NAME=admin
            export OS_USERNAME=admin
            export OS_PASSWORD=ADMIN_PASS
            export OS_AUTH_URL=http://controller:35357/v3
            export OS_IDENTITY_API_VERSION=3
            export OS_IMAGE_API_VERSION=2


    â¦¿ åˆ›å»º demo-openrc æ–‡ä»¶
        è®°å¾—æŠŠ OS_PASSWORD=demo çš„ demo æ”¹æˆ demo ç”¨æˆ·çš„å¯†ç 
        vi demo-openrc
            export OS_PROJECT_DOMAIN_NAME=Default
            export OS_USER_DOMAIN_NAME=Default
            export OS_PROJECT_NAME=demo
            export OS_USERNAME=demo
            export OS_PASSWORD=demo
            export OS_AUTH_URL=http://controller:5000/v3
            export OS_IDENTITY_API_VERSION=3
            export OS_IMAGE_API_VERSION=2



ğŸ”¸ ä½¿ç”¨è„šæœ¬
    â¦¿ source å‘½ä»¤.
        sourceå‘½ä»¤ä¹Ÿç§°ä¸ºâ€œç‚¹å‘½ä»¤â€ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªç‚¹ç¬¦å·ï¼ˆ.ï¼‰
        sourceå‘½ä»¤é€šå¸¸ç”¨äºé‡æ–°æ‰§è¡Œåˆšä¿®æ”¹çš„åˆå§‹åŒ–æ–‡ä»¶ï¼Œä½¿ä¹‹ç«‹å³ç”Ÿæ•ˆï¼Œè€Œä¸å¿…æ³¨é”€å¹¶é‡æ–°ç™»å½•ã€‚
        å¯ä»¥ç”¨ . + æ–‡ä»¶å   ä¹Ÿå¯ä»¥ç”¨ source + æ–‡ä»¶å


    â¦¿ åŠ è½½æ–‡ä»¶ä¸­çš„å˜é‡
        . admin-openrc
        source admin-openrc

    â¦¿ è¯·æ±‚è®¤è¯ä»¤ç‰Œ:
        openstack token issue
            +------------+-----------------------------------------------------+
            | Field      | Value                                               |
            +------------+-----------------------------------------------------+
            | expires    | 2017-08-25T11:39:37+0000                            |
            | id         | gAAAAABZn_5psbtiN6baICkmRs_ajJ8DoaIPUW229xxrp7wB5qa |
            |            | knneQLcDfZdTU-zCLtGqr8m2-hBLch002j7D9lX_-iE7SR-     |
            |            | f6UBn4xDADOVJr8a8xZ6WsTLk-                          |
            |            | nqStMEYzZmVfCfxugxWEuaU_W3E47RnzGhLGtQGOrKQYLEf3xP- |
            |            | QLX_Aec8                                            |
            | project_id | 48cbf0c9f5854d64aea5f260c7b7221e                    |
            | user_id    | c5b9da77aae4451fbb0314352c1e653b                    |
            +------------+-----------------------------------------------------+


