🔵 自身安全:

  1. 使用虚拟机
  2. 必须用VPN + TOR
  3. 使用Proxychain 强制任意软件使用tor网络.




🔵 ....















🔵 虚拟机.

    正常上网:
        你访问的网站可以看到你的公网IP. 也就能定位你的上网地点!

    普通代理: 
        你访问的网站可以看到你代理服务器的公网. 但是这是远远不够安全的.
        比如flash插件.会绕过代理.直接访问目标网站. 也就暴露了你本身的公网IP.
        比如国产网盘:  就是你用代理去访问网盘的页面. 但是在实际上传文件的时候是不用代理的.还是会暴露你的公网IP.
        比如: 国产软件: qq、迅雷、各种国内浏览器 都可能在后台传输一些不可告人的数据. 这就不是暴露IP这么简单了...


    多重代理:
        普通的翻墙都是一重代理. 不论是 http/socks/VPN. 中间只有一个服务器进行数据中转.
        如果你对隐私要求比较高.那么就需要多重代理.  也就是TOR + 翻墙工具.
        根据俺的经验，最佳组合是：用 TOR（俗称“套”）搭配其它的翻墙工具（比如：赛风、无界、自由门、VPN），组合出多重代理。

        其实拿 TOR 来翻墙，颇有杀鸡用牛刀的嫌疑。TOR 的主要强项在于：提供匿名的网络访问，保护你的隐私。

        　　为啥 TOR 能确保匿名捏？因为 TOR 在全球有很多节点，当你利用 TOR 上网的时候，从你的电脑到某个网站，需要经过若干个 TOR 节点。而且 TOR 的节点之间都是加密传输。所以，被你访问的网站，无从知道你的真实IP地址。
            假如你有些悟性，自然会发现：TOR 本身就是一个多重代理！既然这样，为啥还要拿 TOR 跟其它翻墙工具搭配捏？
            主要因为万恶的 GFW 把全球大部分的 TOR 节点都进行了IP封锁。
            因此，如果你不幸身处天朝，是很难直接访问到 TOR 节点滴！所以，咱们只好委屈一下，拿 TOR 搭配其它翻墙工具。


    单虚拟机:
        把有害的软件 都装到虚拟机里面.  然后把虚拟机网卡设置成 host-only 模式. 也就是虚拟机网络设置里的自定义.仅供我的mac使用
        这时候你的虚拟机是不能上网的. 要上网安装可以在实体机上安装一个代理软件. 
        虚拟机虽然不能上网.但是虚拟机其实是可以访问实体机的! 也就是说 虚拟机可以连到实体机的代理软件中. 然后设置这些软件的http代理/socks 代理.
        现在虚拟机里的所有的数据都只能从代理走了. 不走代理就上不了网..



    双虚拟机:
    　　对很多网友而言，单虚拟机已经足够了。那么为啥俺还要介绍双虚拟机捏？主要有如下几方面考虑
        1、某些翻墙代理软件不是开源的，有些网友对这类软件不放心
        2、某些网友的 Host OS 不是 Windows，但是很多翻墙代理是 Windows 软件
        实体机下虚拟出两个虚拟机.

        　　所以，咱们可以在"单虚拟机"的基础上再扩展一下，把代理软件也放到虚拟机中（下图的虚拟机B）。虚拟机B 的网卡很有讲究滴——必须是双网卡。一个网卡设置为 Host-Only 模式，以便跟虚拟机 A对接；另一个网卡设置为 NAT 模式，以便访问外网。
        示意图如下






🔵 Tor

    上网隐私:
    访问了哪个网站.
    发送/接收的数据.




    TOR大概原理:
        全世界无数代理服务器. tor每隔10分钟会自动选择任意3个代理服务器.进行连接.
        也就是说IP地址每十分钟就会变. 也就是说可以拿来刷票啊!!! 当然效率慢..  
        也就是你和服务器之间还隔着三个随机的代理服务器. 入口节点/中间节点/出口节点.
        但是不是所有的代理服务器都是安全的. 就像wifi蜜罐. 
        中国/香港/澳门 等等有很多政府的代理蜜罐. 
        万一你的3个随机代理服务器 其中有一个是政府蜜罐. 政府就能获取你的信息. 你也就不安全了.
        所以尽量避免 中国的代理节点. 这就需要在 TOR配置文件里修改了.



    TOR 安装:

    　　虚拟机是为了进行网络隔离，确保你本机的软件总是经过代理联网，而不会直接联网——直接联网可能会导致你的公网IP暴露。


如果只用 TOR . 那么如果 GFW 对所有的 TOR 流量都做了记录.还是可以查到你的.
如果你使用 VPN+TOR，那么你的 ISP 监控你的流量，看到的是 VPN 流量——（因为 VPN 加密）ISP 看不到你的 TOR 流量。在这种情况下，流量关联分析的难度大大提高了




🔵 Proxychains


首先要开代理软件啊. 如果用的 speclite .. 默认代理端口是9090
这个软件默认浏览器是走代理的. 但是终端是不走代理的.
所以终端里面 ping谷歌是不通的..



1. Mac 安装 homebrew.
2. brew install proxychains-ng
3. 配置文件 vi /usr/local/etc/proxychains.conf
    在文件末尾[ProxyList]后面，
    把原来的socks4 127.0.0.1 9050删掉，添加socks5 127.0.0.1 1080

    3.添加代理服务器列表

    在最下方这个地方，默认是socks4 xxxx xxx
    改成sock5 127.0.0.1 xxxx   // xxxx是你自己的端口，也就是上边在配置ss时输入的local_port:xxxx 我这里用的是8089

    ps: 默认的socks4 127.0.0.1 9095是tor代理，
    而socks5 127.0.0.1 1080是shadowsocks的代理。
    如果用的 speclite .. 默认代理端口是9090


4. 使用
    重新打开一个命令行窗口，
    用法就是在常规命令之前加上proxychains4


    补充alias

    vim ~/.bash_profile
    插入

    alias gfw='proxychains4'
    alias sudogfw='sudo proxychains4'
    使~/.bash_profile生效

    source ~/.bash_profile



5. 测试




5.使用ProxyChains 启动firefox

    终端输入：proxychains firefox启动火狐浏览器

    测试一下：

    使用ProxyChains代理其他程序和启动Firefox同理

    proxychains msfconsole //启动msf

    proxychains sqlmap     //通过代理启动sqlmap

    不再一一介绍。




















intitle:test.page.for.apache   就可以查出用默认方式安装apache的网站了!!! 没有内容 只安装了apache的那种网站.

现在网址有了. 怎么找出IP呢. 
直接ping 不行. 会暴露本机IP.  好像有网页可以查的. whiis




tor 有命令行的?
mac: brew install tor

然后就可以用  tor/tor-reslove 等等命令了..
要先连接 tor...




下面来 用nmap 扫描端口.
为了让 namp 也使用 tor的网络!  就需要使用 proxychains 这个代理软件. 
这个软件可以强制任意应用程序用tor进行tcp连接..
