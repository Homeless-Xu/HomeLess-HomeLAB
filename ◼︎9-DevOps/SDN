🔸 参考

    ❗️❗️❗️★★★★★    https://www.zhihu.com/question/20279620   ❗️❗️❗️
    ❗️❗️❗️★★★★★    https://www.zhihu.com/question/20279620   ❗️❗️❗️
    ❗️❗️❗️★★★★★    https://www.zhihu.com/question/20279620   ❗️❗️❗️




🔸 SDN 
    SDN (Software Defined Networking)  也就是软件定义网络

 SDN 是一种网络设计理念.

    ❗️ SDN 是下一代网络架构, 影响整个 IT 产业. ❗️


相对传统的网络架构而言, SDN 是一种革命性的变革.它将控制功能从网络交换设备中分离出来.

传统的网络架构, 你需要购买 交换机/路由器这些专业的网络设备. 才能搭建成一个网络.
而且这些网络设备提供的功能都是固定的,有全球标准的! 个人是改不了的!

新型的网络架构 (SDN) 
只要用电脑,不需要依靠设备提供商的特定硬件(路由器/交换机)
用户通过软件编程就可以实现各种网络功能! 
因此，控制功能既不再局限于路由器中，也不再局限于只有设备的生产厂商才能够编程和定义。


更为重要的是，某些网络功能的提供也变得异常简单，比如组播和负载均衡功能的实现等。
另外，拓扑结构的限制也将消失。
比如在传统数据中心中，由于树形拓扑导致的、占统治地位的东西像流量被限制的问题也将得到解决。



SDN 之所以是一种革命性的变革. 是因为它解决了传统网络中无法避免的一些问题.
SDN 有强大的灵活性, 可以实现网络的虚拟化, 还有低廉的成本.
你要知道专业的网络设备价格高的离谱!!



OpenFlow是SDN的三大关键要素之一。

第一关键要素是转发与控制分离，
    这使得网络交换机的数据转发变得更加简单、快速；
    同时，控制变成了网络操作系统中一个相对集中的逻辑功能。

第二个关键要素是OpenFlow协议，
    它向交换机传送转发表，交换机依此转发报文。这种做法与传统网络完全不同。
    在传统网络架构中，交换机和路由器需要自己决定报文的转发路径，
    这可能会给网络运营商带来一些不可预知的负面影响，
    包括成本增加、性能降低、上市时间延缓等。
    有了SDN，控制软件决定报文的转发路径，使得运营商可以“随心所欲”地控制网络。

第三个关键要素是具有一致性的、全系统范围的网络操作系统可编程接口，
    它能让网络实现真正意义上的可编程或者软件定义。
    如果不能实现转发与控制分离，那么几乎所有SDN所能带来的好处都无法体现；
    如果能实现转发和控制分离，但没有OpenFlow协议，
    那么就需要通过其它途径，将所需要的流量表信息传递给交换机。
    OpenFlow就是实现这一功能的行业标准。
    总而言之，要实现真正的SDN，这三大要素缺一不可。




综上所述，SDN所能提供的五大好处如下：
第一、SDN为网络的使用、控制以及如何创收提供了更多的灵活性。
第二、SDN加快了新业务引入的速度。网络运营商可以通过可控的软件部署相关功能，而不必像
以前那样等待某个设备提供商在其专有设备中加入相应
方案。
第三、SDN降低了网络的运营费用，也降低了出错率，原因在于减少了网络的人工干预。
第四、SDN有助于实现网络的虚拟化，从而实现了网络的计算和存储资源的整合，最终使得只要通过一些简单的软件工具组合，就能实现对整个网络的控制和管理。

第五、SDN让网络乃至所有IT系统更好地以业务目标为导向。







🔸 为什么需要一个全新的网络架构(SDN)
当前的网络架构以及运行30年了. 从互联网开始用到现在一直在用传统的架构.
现在所有的交换机/路由器 用的协议都是固定的那么几种.
如果你想增加一个新的协议. 那么得改变所有路由交换的软件系统...

SDN 打破了这种传统, 它让网络可编程化,或者说用软件定义网络. 这样才能满足用户的各种需求.



    在我们架构网络的时候，SDN是一种新的思路。



SDN 是一种网络虚拟化方法 致力于优化网络资源，使网络快速适应不断变化的业务需求、应用程序和流量。


它的工作方法是分离网络的控制平面和数据平面，创建与物理设备不同的软件可编程基础架构。

借助 SDN，网络编排、管理、分析和自动化功能成为 SDN 控制器的工作。由于这些控制器不属于网络设备，因此它们可以利用现代云计算和存储资源的规模、性能和可用性。SDN 控制器越来越多地建立在开放平台之上，采用开放标准和开放式 API，使它们能够编排、管理和控制来自不同供应商的网络设备。

SDN 带来诸多业务优势。控制层和传输层的分离，提高了灵活性并加快了新应用程序的上市时间。能够更快地应对问题和故障，从而提高了网络可用性。此外，可编程性更便于 IT 组织实现网络功能的自动化，进而降低运营成本。

SDN 可以和另一项技术（即网络功能虚拟化 (NFV)）紧密结合。NFV 提供了虚拟化基于设备的网络功能的能力，例如防火墙、负载平衡器和 WAN 加速器。SDN 提供的集中化控制可以有效管理和编排 NFV 支持的虚拟网络功能。









借助软件定义网络 (SDN)，组织能够通过基于策略的工作流程自动化方法加快应用的部署和交付速度，从而大幅度降低 IT 成本。

SDN 技术可以大范围提供自动化、按需应用交付和移动功能，为云架构提供支持。

这种技术有助于进一步增强数据中心虚拟化的优势，提高资源的灵活性和利用率，并降低基础设施成本和开支。

SDN 之所以能够帮助实现上述业务目标，是因为它能将网络管理和应用服务融合到可扩展的集中式业务协调平台，在整个基础设施范围实现自动调配和自动配置。

它还能通过常用的集中式 IT 策略将不同的 IT 组和工作流程联系在一起，借此打造出一个现代化的基础设施，在短短几分钟内实现新应用和新服务的交付，而不必像以前那样耗费几天乃至几周的时间。

SDN 还能为新应用和新业务服务的部署提供速度和灵活性上的保证。
灵活、基于策略和可编程，正是思科 SDN 解决方案最独特的特点。
此外，思科 SDN 所提供的平台也能胜任当前和未来要求最为苛刻的网络需求。


您是否希望在控制支出的同时不断创新？

设想一下，如果您能在加强安全保护的同时，加快服务和创新速度，降低运营成本，并获得全数字化企业的业务敏捷性，结果会如何？面向数据中心的  思科以应用为中心的基础设施 (ACI) 、面向企业的 思科 APIC 企业模块 (APIC-EM) 、 适用于软件定义广域网 (SD-WAN) 的思科智能广域网 (IWAN) 以及 思科软件定义接入 (SD-Access) 就能提供这样无与伦比的 IT 解决方案。

依托于领先的 IT 技术合作伙伴、开放式 API 和 IT 协调工具，这些解决方案能够帮助您提高敏捷性和运营效率。

作为运营商，您是否在寻找服务基础设施解决方案？

设想一下，如果您的平台能够帮助您实现业务转型，加快创收，降低运营成本，并以 Web 级响应速度部署新服务，结果会如何？ 网络虚拟化和自动化解决方案可使之成为现实。

它将 面向运营商的软件定义网络、网络功能虚拟化、开放式 API 和高级协调功能集于一身，可打造一个灵活的模块化服务平台。此外，您还可以将 思科演进的可编程网络 作为补充平台。该平台包含物理和虚拟基础设施服务交付功能，可帮助您加快各种创新服务的部署速度。

了解 网络虚拟化和自动化解决方案 如何帮助您在创新中转型。
了解 思科演进的可编程网络 如何帮助您加快服务部署速度。
借助思科服务取得更丰硕的成果

考虑部署 SDN 的关键在于，您需要定义目标业务成果，并规划好每个阶段的工作，然后了解如何加快实现 SDN 的效益的同时降低风险。

我们拥有 30 年的经验，所部署的设备超过 5000 万部，而且每年与客户进行多达 600 万次互动，这些资历确保我们能够为您提供全方位的专业解决方案和产品支持服务。我们可以帮助您打造快速、敏捷的 IT 系统，不仅完美契合您的业务需求，而且成本更低，更富有创新性。





🔸 SDN





🔸 SDN的三大特性：

    集中化的管理：有统一的管理入口。比方说我有100台交换机，对着100台交换机的配置管理，不需要逐个交换机配置，可以通过一个统一的控制器配置着100台交换机。这就是集中化的管理。
    控制转发分离：在SDN的网络种，SDN所希望的是交换机应该足够的“傻瓜”。交换机的功能应该只是匹配和动作（match & action）。里面的邻居子系统、ACL规则、路由、网关等功能都应该在交换机上完成，而不是在控制器上完成。当然也是一种理想的情况。也是大部分宣称自己是SDN云网络的产品做到的地方。在Open vSwitch 的Dragonflow云网络中，其实就把邻居子系统和网关的部分功能做到SDN控制器上，主要的目的是为了解决东西流量的分布式以及减少故障域。在Dragonflow的云网络中还是保留了不少传统云网络的实现。
    开放的API：在SDN的架构中，开放的API成为北向接口。传统网络的交换机的配置基本上都是CLI配置，或者Netconf配置，这样的配置接口很难实现通过软件控制网络。对于我们的这些软件开发者来说，如果通过可以对网络编程，就需要一个统一的开放的API进行调用。这也是SDN的核心思想可编程的网络。




1.2，SDN有什么好处？

这个问题其实有很多人问过我，SDN究竟有什么好处？有些比较直接会问，用了SDN网络性能会不会提升30%？用了SDN之后，会不会多出很多新的网络功能？我的观点是SDN的提出不是一场网络的革命，而是一次网络的发展。架构云网络的过程中，SDN给我们带来最大的好处是通过SDN实现的网络功能所付出的代价会比传统网络的要小很多。这个代价主要是指这几个个方面：开发周期、网络复杂度、架构的完整度、网络IO路径长度、冗余耦合度。

我们很早之前就有考虑将云网络和第三方的安全产品整合，提供一套更安全的云网络。安全的厂家只要把原来的安全产品做成实例，运行到云网络中即可。但是最大的问题是云网络，如何将流量引流到虚拟化的安全产品？为了引流我们需要创建更多的Vlan，需要更多的桥，并且第三方的安全厂家还需要识别我们的实例的迁移日志，配合迁移做规则的调整，我们也需要开放很多本来不应该开放的API（提供vlan、桥的创建、日志的筛选）。最终这个计划还是终止了，因为代价太高了。我们的整体网络架构都有大量的改动，同时网络的IO路径增加了近一倍，并且开发周期预计要两个季度，更重要的是和第三方的整合项目是不应该存在这么多的交叉开发过程。后来我们的SDN云网络终于开发完成了。引流的工作集中在SDN控制器完成，整体的网络架构基本没有任何改动。网络IO路径没有变化。即使实例的迁移我们的SDN控制器也能够识别出来，不需要第三方安全厂家监听日志事件。实现这样的功能一个月就能完成了。这就是SDN的最大的好处了。当然这是我们对SDN云网络的技术实现细节有关系，后续我会专门写一篇关于品高SDN云网络的介绍文章，专门讲一讲这一方面的事情。





传统的云网络

2.1，传统的云网络

传统的云网络：就是基于Linux kernel的网络协议栈提供的传统网络组件实现云网络的基本功能。比方说：安全组就用Linux自带的iptables实现、子网隔离就用Linux自带的Vlan实现、地址转换就用Linux自带的NAT实现、流量控制就用Linux自带的TC实现、路由功能Linux自带的route table实现等等。再配合一些网络规划，用其中一两台服务器作为网络节点（云网络的出口核心路由器）。最后配合上云的调度能力。这样传统的云网络就构建起来的。

传统的云网络确实也存在不少的问题:

网络节点的网络业务过于集中，容易出现单点故障。
东西南北流量混合，网络质量不高。
传统Linux网络协议栈的网络功能捆绑严重，资源消耗严重。
Vlan的子网隔离，数量不足。
横向扩展能力差，网络规模难以扩展。
纵向吞掉性能，受网络节点点单限制。
为了解决传统网络的这些问题，其实很多企业、开源组织也是付出了不少的努力。说到底其实最关键的就是把网络节点的业务功能下沉到计算节点（分布式的虚拟化网络）。当然还有其他的问题，这是不会这么快暴露出来。




2.2 Open vSwitch云网络之路

前段时间看了《通向高可用与分布式的OpenStack网络之路》。我得到很多的启发，深深地体会到云网络之路确实艰辛并且曲折。我对比了Open vSwitch的发展之路和品高的SDN云网络做了一些分析。如下图：

(点击放大图像)



一个成熟的商用云网络有一个准入条件就是高可用。Open vSwitch在Neutron L3HA版本中实现了的HA。但是在后续的几个版本中，因为架构上冲突Neutron L2POP & ARP Respondar 、DVR、Dragonflow的版本中HA就无法兼容了。Open vSwitch的发展之路总结起来就是把网络节点上网络功能（FW，Gateway，NAT，ROUTE，DHCP等功能）下沉到计算节点。也是提高为了网络容灾能力。不可否认Open vSwitch是一个成功的产品，目前很多云厂商也是在Open vSwitch的基础上实现自己的云。

SDN的云网络

SDN的提出确实给了我们很多的新的想法。首当其中的想法就是：如果云网络是通过SDN实现的，是不是可以解决传统云网络难以解决的问题呢？对于一个新的技术，我们必须要有足够的宽容度。我们的做法是通过SDN实现和传统云网络一样功能的云网络，不要求SDN去突破性能，创造新功能。我们和Dragonflow不同，我们不是部分功能使用SDN，而是全部网络功能都通过SDN实现。这想法确实有点疯狂，但是可行性上是完全没有问题的。

我们制定了一些SDN的要求：

摆脱网络节点。
不使用Linux网络协议栈自带的网络组件。
计算节点使用Open vSwitch作为分布式虚拟交换机。
使用SDN控制器，将全部的云网络业务功能都集中在SDN控制器。
SDN 控制器和Open vSwitch的通信使用OpenFlow协议。
SDN控制器集群高可用。
在开发的过程中，我们深刻地体会到SDN的强大之处。我们不仅仅完成了我们当初制定的要求，我们也通过SDN带来了很多新的网络特性。隐藏式分布式虚拟化网关、实例迁移规则不用重新配置、网络功能可热插拔、网络业务的叠加不会增加IO路径、网络可视化、ARP预处理以及ARP预填充等等。所有网络功能都在SDN控制器，所有网络规则都是按需分配自动超时，控制器集群高可用。后续我会和大家分享一下Bingo SDN的网络功能。

SDN的云网络开发过程中我们也确实遇到了很多问题。比方说，OpenFlow协议对一些网络功能功能的不支持，Open vSwitch中有一些Bug，SDN网络的新建连接性能低，SDN控制器集群高可用等等。最后我们还是突破这些问题，后续我会和大家分享的Bingo SDN的遇到的问题和解决方法。

不可否认，SDN的云网络确实是一套可行并且正确的发展之路。SDN给了我们云网络更多发展的空间。


