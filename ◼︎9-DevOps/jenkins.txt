ğŸ”¸ Jenkins ç®€ä»‹
    æä¾›ä¸€ç§æ˜“äºä½¿ç”¨çš„æŒç»­é›†æˆç³»ç»Ÿ. ä½¿å¼€å‘è€…ä»ç¹æ‚çš„é›†æˆä¸­è§£è„±å‡ºæ¥ï¼Œä¸“æ³¨äºæ›´ä¸ºé‡è¦çš„ä¸šåŠ¡é€»è¾‘å®ç°ä¸Šã€‚
    åŒæ—¶ Jenkins èƒ½å®æ–½ç›‘æ§é›†æˆä¸­å­˜åœ¨çš„é”™è¯¯ï¼Œæä¾›è¯¦ç»†çš„æ—¥å¿—æ–‡ä»¶å’Œæé†’åŠŸèƒ½ï¼Œè¿˜èƒ½ç”¨å›¾è¡¨çš„å½¢å¼å½¢è±¡åœ°å±•ç¤ºé¡¹ç›®æ„å»ºçš„è¶‹åŠ¿å’Œç¨³å®šæ€§ã€‚


    Jenkins æ˜¯ä¸€ä¸ªç”¨äºæŒç»­æ„å»ºçš„å¯è§†åŒ–webå·¥å…·ï¼Œ
    å°±æ˜¯å„ç§é¡¹ç›®çš„çš„â€œè‡ªåŠ¨åŒ–â€ç¼–è¯‘ã€æ‰“åŒ…ã€åˆ†å‘éƒ¨ç½²ï¼Œ
    å°†ä»¥å‰ç¼–è¯‘ã€æ‰“åŒ…ã€ä¸Šä¼ ã€éƒ¨ç½²åˆ°Tomcatä¸­çš„è¿‡ç¨‹äº¤ç”±Jenkinsï¼Œ
    Jenkinsé€šè¿‡ç»™å®šçš„ä»£ç åœ°å€ï¼Œå°†ä»£ç æ‹‰å–åˆ°jenkinså®¿ä¸»æœºä¸Šï¼Œè¿›è¡Œç¼–è¯‘ã€æ‰“åŒ…å’Œå‘å¸ƒåˆ°webå®¹å™¨ä¸­ã€‚
    Jenkinså¯ä»¥æ”¯æŒå¤šç§è¯­è¨€ï¼ˆæ¯”å¦‚ï¼šjavaã€c#ã€phpç­‰ç­‰ï¼‰ï¼Œä¹Ÿå…¼å®¹antã€mavenã€gradleç­‰å¤šç§ç¬¬ä¸‰æ–¹æ„å»ºå·¥å…·ï¼ŒåŒæ—¶è·Ÿgitã€svnæ— ç¼é›†æˆï¼Œä¹Ÿæ”¯æŒç›´æ¥ä¸githubç›´æ¥é›†æˆã€‚




ğŸ”¸ æ¶æ„

    1> å¼€å‘è€…å°†æ–°ç‰ˆæœ¬pushåˆ°git server (Gitlab)ã€‚

    2> Gitlabéšåè§¦å‘jenkins masterç»“ç‚¹è¿›è¡Œä¸€æ¬¡buildã€‚(é€šè¿‡web hookæˆ–è€…å®šæ—¶æ£€æµ‹)

    3> jenkins masterç»“ç‚¹å°†è¿™ä¸ªbuildä»»åŠ¡åˆ†é…ç»™è‹¥å¹²ä¸ªæ³¨å†Œçš„slaveç»“ç‚¹ä¸­çš„ä¸€ä¸ªï¼Œè¿™ä¸ªslaveç»“ç‚¹æ ¹æ®ä¸€ä¸ªäº‹å…ˆè®¾ç½®å¥½çš„è„šæœ¬è¿›è¡Œbuildã€‚è¿™ä¸ªè„šæœ¬å¯ä»¥åšçš„äº‹æƒ…å¾ˆå¤šï¼Œæ¯”å¦‚ç¼–è¯‘ï¼Œæµ‹è¯•ï¼Œç”Ÿæˆæµ‹è¯•æŠ¥å‘Šç­‰ç­‰ã€‚è¿™äº›åŸæœ¬éœ€è¦æ‰‹åŠ¨å®Œæˆçš„ä»»åŠ¡éƒ½å¯ä»¥äº¤ç»™jenkinsæ¥åšã€‚

    4> æˆ‘ä»¬åœ¨buildä¸­è¦è¿›è¡Œç¼–è¯‘ï¼Œè¿™é‡Œä½¿ç”¨äº†åˆ†å¸ƒå¼ç¼–è¯‘å™¨distccæ¥åŠ å¿«ç¼–è¯‘é€Ÿåº¦ã€‚


    å¤šä¸ªå¼€å‘è€…  commot/push åˆ° gitlab æœåŠ¡å™¨.
    gitlabæœåŠ¡å™¨æœ‰è§¦å‘å™¨.ä¸€æ—¦æœ‰commit å°±è”ç³» jenkins ä¸»æœåŠ¡å™¨è¿›è¡Œè‡ªåŠ¨åŒ–æ“ä½œ.
    jenkins ä¸»æœåŠ¡å™¨æŠŠè¯¦ç»†æ“ä½œåˆ†é…ç»™kenkinsä»æœåŠ¡å™¨.  ä»æœåŠ¡å™¨ä¸Šæ‰§è¡Œæ„å»ºè„šæœ¬.
    æ„å»ºå¥½å å‘ç»™çœŸæ­£çš„æœåŠ¡å™¨.è¿›è¡Œéƒ¨ç½²å®‰è£….






ğŸ”¸ å‡†å¤‡ java ç¯å¢ƒ 
    éœ€è¦1.7+ ç‰ˆæœ¬
    yum install java-1.8.0-openjdk -y
    java -version



ğŸ”¸ å®‰è£… 
    sudo wget -O /etc/yum.repos.d/jenkins.repo http://pkg.jenkins-ci.org/redhat-stable/jenkins.repo
    sudo rpm --import https://jenkins-ci.org/redhat/jenkins-ci.org.key
    sudo yum install jenkins -y


ğŸ”¸ å¼€æœºå¯åŠ¨   sudo chkconfig jenkins on
ğŸ”¸ å¯åŠ¨       sudo service jenkins start
ğŸ”¸ åœæ­¢       sudo service jenkins stop
ğŸ”¸ é‡å¯       sudo service jenkins restart
ğŸ”¸ çŠ¶æ€       sudo service jenkins status

ğŸ”¸ ç«¯å£æ£€æµ‹.  
    netstat -nltp   é‡Œé¢çš„ l æµ‹è¯•æ˜¯æ˜¾ç¤ºæ­£åœ¨ç›‘å¬çš„ç«¯å£. ä¸é€‚åˆè¿™é‡Œç”¨ æˆ‘ä»¬ç”¨
    nmap 127.0.0.1  çœ‹çœ‹8080 æœ‰æ²¡æœ‰èµ·æ¥.


ğŸ”¸ æ—¥å¿—æ–‡ä»¶: cat /var/log/jenkins/jenkins.log
ğŸ”¸ é…ç½®æ–‡ä»¶: vi /etc/sysconfig/jenkins

ğŸ”¸ å¤–ç½‘è®¿é—®
    â€¢ é…ç½®    vi /etc/sysconfig/jenkins
        JENKINS_HTTPS_LISTEN_ADDRESS="0.0.0.0"
        JENKINS_PORT="8765"     â€¢ ä¿®æ”¹ç«¯å£ 

    â€¢ é‡å¯ sudo service jenkins restart
    â€¢ ç«¯å£: nmap -p 8765 127.0.0.1
    â€¢ æµè§ˆå™¨è®¿é—®: 35.194.128.92:8765

ğŸ”¸ è·å–ç™»å½•å¯†ç  

    cat /var/lib/jenkins/secrets/initialAdminPassword

    å¾ˆé•¿ä¸€ä¸². 
    3599c6e576fd4ec6a2c0da139aa44550



ğŸ‘¹ æ’ä»¶å®‰è£…å¤±è´¥

    åŸå› å¾ˆç®€å•.
    ä½ åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ 

        âœ˜âœ˜âˆ™ğ’—2 ~ âœ curl http://127.0.0.1:8080
        <html><head><meta http-equiv='refresh' content='1;url=/login?from=%2F'/><script>window.location.replace('/login?from=%2F');</script></head><body style='background-color:white; color:white;'>


        Authentication required
        <!--
        You are authenticated as: anonymous
        Groups that you are in:

        Permission you need to have (but didn't): hudson.model.Hudson.Administer
        -->

        </body></html>                                                                                                                                                                                                  
    æ„å‘³ç€ jenkins has anonymous priviledges which is not allowing any connection.

    To solve this issue, you will have to do two changes:

    ğŸ”¸ è§£å†³ ä¸¤æ­¥
        â¦¿ jenkins ç”¨æˆ·åˆ†é…åˆ°rootç»„
            sudo usermod -a -G root jenkins

        â¦¿ å¤–ç½‘è®¿é—®è®¾ç½®
            vi /etc/sysconfig/jenkins 
            JENKINS_LISTEN_ADDRESS="0.0.0.0"

        â¦¿ é‡å¯æœåŠ¡
        sudo service jenkins restart









â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸------â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›â¬›ï¸â¬›ï¸
ğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µ ä½¿ç”¨ ğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µ
â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸------â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸



ğŸ”¸ Create First Admin User
xujian/ 0219 / 


 

 æ­¤å¤–ï¼ŒJenkins æä¾›äº†ä¸°å¯Œçš„ç®¡ç†å’Œé…ç½®çš„åŠŸèƒ½ï¼ŒåŒ…æ‹¬ç³»ç»Ÿé…ç½®ã€ç®¡ç†æ’ä»¶ã€æŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯ã€ç³»ç»Ÿæ—¥å¿—ã€èŠ‚ç‚¹ç®¡ç†ã€Jenkins å‘½ä»¤è¡Œçª—å£ã€ä¿¡æ¯ç»Ÿè®¡ç­‰åŠŸèƒ½ã€‚è¯•è¯•çœ‹ï¼Œæ‚¨å°±ä¼šå‘ç° Jenkins éå¸¸å¥½ä¸Šæ‰‹ä½¿ç”¨ã€‚



ğŸ”¸ Jenkinsæ’ä»¶

    Jenkinså…¶å®æ²¡æœ‰ä»€ä¹ˆéœ€è¦ç‰¹åˆ«é…ç½®çš„ï¼Œç”±äºè¿™æ¬¡ä»»åŠ¡ä¸­éœ€è¦åˆ©ç”¨Jenkinsä¸gitï¼Œgitlabåä½œï¼Œæ‰€ä»¥éœ€è¦å®‰è£…ä¸€äº›æ’ä»¶ã€‚åœ¨ä¸»é¢æ¿ä¸Šç‚¹å‡»Manage Jenkins -> Manage Pluginsã€‚

    ç”±äºå…¬å¸ä½¿ç”¨ä»£ç†è¿æ¥å¤–ç½‘ï¼Œé¦–å…ˆéœ€è¦ä¸ºJenkinsæ’ä»¶å®‰è£…é…ç½®proxyã€‚ç‚¹å‡»Advancedæ ‡ç­¾å³è¿›å…¥proxyè®¾ç½®é¡µé¢ã€‚

    Aailableæ ‡ç­¾ä¸‹å°±æ˜¯å¯ä»¥å®‰è£…çš„æ’ä»¶ã€‚

    è¦è®©Jenkinså¯ä»¥è‡ªåŠ¨build git repoä¸­çš„ä»£ç ï¼Œéœ€è¦å®‰è£…GIT Client Pluginå’ŒGIT Pluginã€‚
    è¦æƒ³Jenkinså¯ä»¥æ”¶åˆ°Gitlabå‘æ¥çš„hookä»è€Œè‡ªåŠ¨buildï¼Œéœ€è¦å®‰è£… Gitlab Hook Pluginã€‚
    è¦è®©Jenkinså¯ä»¥åœ¨buildå®Œæˆä¹‹åæ ¹æ®TAPï¼ˆtest anything protocolï¼‰æ–‡ä»¶ç”Ÿæˆgraphï¼Œéœ€è¦å®‰è£… TAP Pluginã€‚






ğŸ”¸ æ’ä»¶å®‰è£…

ç³»ç»Ÿç®¡ç† âœ æ’ä»¶ç®¡ç† âœ 



æ–°å»ºä»»åŠ¡.





ğŸ”¸ æ–°å»ºé¡¹ç›®/ä»»åŠ¡


é¡¹ç›®å: Test âœ æ„å»ºä¸€ä¸ªè‡ªç”±é£æ ¼çš„è½¯ä»¶é¡¹ç›® âœ OK 

æºç ç®¡ç†: 
    Git 
	Repository URL: https://github.com/Xu-Jian/mycms
éšä¾¿é€‰ä¸€ä¸ª githubçš„ 

æ„å»ºè§¦å‘å™¨

æ„å»ºç¯å¢ƒ

æ„å»º âœ æ·»åŠ  exceute shell âœ è¾“å…¥å‘½ä»¤
cd ${WORKSPACE} && ./gradlew build && mv ${WORKSPACE}/docker/jpetstore.war /usr/local/tomcat9/webapps


    cd ${WORKSPACE} WORKSPACEæ˜¯jenkinsçš„å®šä¹‰çš„ç¯å¢ƒå˜é‡ï¼Œä»£è¡¨è¯¥é¡¹ç›®å¯¹åº”çš„æ–‡ä»¶è·¯å¾„ï¼Œè¯¥é¡¹ç›®æ£€å‡ºçš„æºç ä¹Ÿæ˜¯è¯¥ç›®å½•ã€‚ç±»ä¼¼çš„ç¯å¢ƒå˜é‡è¿˜æœ‰BUILD_NUMBER, BUILD_ID, JOB_NAME, JENKINS_HOMEç­‰ç­‰
    ./gradlew build ä½¿ç”¨gradle æ‰§è¡Œæ„å»ºå‘½ä»¤ï¼Œå°†æ£€å‡ºçš„æºç ç¼–è¯‘æ‰“åŒ…ä¸ºwaråŒ…ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çš„æ„å»ºå·¥å…·æ˜¯gradleï¼Œå¦‚æœæ˜¯ä½¿ç”¨mavenï¼Œå¯ä»¥mvn clean package
    mv {WORKSPACE}/docker/jpestore.war /usr/local/tomcat9/webapps/
    å°†æ‰“åŒ…å¥½çš„waråŒ…æ‰‹åŠ¨æ”¾åˆ°tomcatçš„webappsç›®å½•ä¸‹ï¼Œä»¥ä¾¿Tomcatèƒ½å¯åŠ¨è¯¥é¡¹ç›®äº†







ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸æ’ä»¶ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸


ğŸ”¸ æ’ä»¶:

åœ¨å‰é¢æˆ‘ä»¬çœ‹è§jenkinså¯ä»¥æ”¯æŒgit, svn, mavenç­‰å¾ˆå¤šåŠŸèƒ½ï¼Œè¿™äº›éƒ½æ˜¯Jenkinsçš„æ’ä»¶.
jenkinsæœ¬èº«ä¸æä¾›å¾ˆå¤šåŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨æ’ä»¶æ¥æ»¡è¶³æˆ‘ä»¬çš„ä½¿ç”¨.



ğŸ”¸ å¿…å¤‡æ’ä»¶:
è¦æ„å»ºä¸€ä¸ªå®Œæ•´çš„Piplineï¼Œjenkinsé»˜è®¤çš„åŠŸèƒ½æ˜¯å®Œå…¨ä¸å¤Ÿç”¨çš„ã€‚ è¿˜å¥½jenkinsä¸ºæˆ‘ä»¬æä¾›äº†ä¸°å¯Œçš„æ’ä»¶æ”¯æŒï¼Œæ‰€ä»¥å†å¼€å§‹åˆ›å»ºæˆ‘ä»¬çš„jenkinsä»»åŠ¡ä¹‹å‰å…ˆå®‰è£…ä¸€äº›å¸¸ç”¨çš„å¿…å¤‡æ’ä»¶å§ã€‚


ğŸ”¸ å¸¸ç”¨æ’ä»¶åˆ—è¡¨

    Git Plugin (æ”¯æŒä»gitæœåŠ¡å™¨è·å–ä»£ç )
    Clone Workspace SCM Plugin (ç”¨äºæ”¯æŒä¸åŒjobä¹‹é—´æ‹·è´workspaceçš„èƒ½åŠ›)
    Build Pipeline Plugin ï¼ˆç”¨äºåˆ›å»ºpiplineè§†å›¾ï¼‰
    Deploy Plugin ï¼ˆæ”¯æŒè¿œç¨‹éƒ¨ç½²war/earåˆ°åº”ç”¨æœåŠ¡å™¨å¦‚Tomcat,Jenkinsï¼‰



ğŸ”¸ æ’ä»¶å®‰è£… 
ç³»ç»Ÿç®¡ç† âœ ç®¡ç†æ’ä»¶ âœ å¯é€‰æ’ä»¶ âœ è¾“å…¥æ’ä»¶åè¿›è¡Œè¿‡æ»¤  âœ æ‰“å‹¾ âœ ç›´æ¥å®‰è£… âœ ç­‰å¾…å®Œæˆå¹¶é‡å¯


4ã€Email Extension Plugin 
é“¾æ¥ï¼šhttps://wiki.jenkins-ci.org/display/JENKINS/Email-ext+plugin
ä½œç”¨ï¼šç”¨äºæ›¿æ¢Jenkinsè‡ªå¸¦çš„é‚®ä»¶å‘é€ï¼Œæ›´åŠ çš„å¼ºå¤§










ğŸ”¸ Jenkins Job

