## Cisco & GNS3 


互联网操作系统（**Internetwork Operating System，简称IOS**）是思科公司为其网络设备开发的操作维护系统。
用户通过命令行人机界面对网络设备进行功能设置，提供的功能大致为以下几点：网络设备及连接端口的功能首选项设置、运行网络协议与网络功能设备间之数据传输安全管理设置。


**GNS3 推荐IOS:**   c3640, c3660, c3725, c3745 and c7200 .            // 别的不一定兼容.  

## Cisco Router + 模拟器

模拟器:  模拟设置.学习用. 类似 VM VB 等虚拟机.

1. Cisco Packet Tracer 6.2 网络模拟器中文正式版，带中文汉化补丁，
	将文件Chinese.ptl拷贝到C:\Program Files (x86)\Cisco Packet Tracer 6.2sv\languages目录下，
	运行Cisco Packet Tracer 6.2，在选项中修改语言。


## GNS3  
不是支持 所有设备的虚拟.  有些.bin 文件  →  Sorry, this is not a valid IOS image!
免费软件 官网下载 .  和虚拟机一样 需要 cisco 路由系统的镜像文件( .bin 格式的 )

设置 → Dynamips → ios routers →  选择下载的 .bin 镜像. → 一路 NEXT. 

开机: 拖出路由器到主界面.  右键 start  
进入命令窗口: 开机后双击路由图标


## command

- 版本信息:  `show version`  
- 命令补全: en + TAB → enable

- 特权命令模式: **R1# or Switch\#**

- 用户命令模式: **R1\> or Switch\>**
	// 用户命令模式 只能使用一些查看命令.

- 全局配置模式:  switch(config)\#
- 端口配置模式:  switch(config-if)# 




switch(config)#hostname 
更改交换机名字.



检查、查看命令

show (sh) 开始


show flash 查看内存
show mac-address-table  查看 Mac 地址列表






交换机 配置 VLAN 
VLAN 可以把一个物理网络 划分成多个逻辑网段
因此 Vlan 可以抑制网络风暴 增强网络的安全性


两种方式 创建 vlan
全局配置模式下: vlan 10

或者 vlan database 下 创建 vlan:
switch(vlan)vlan 20


更好局域网交换机名字
终端下 输入 hostname xx  就变成 xx 了.

创建 vlan
xx(config) vlan 10
xx(config-vlan)# name xujian
xx(config-vlan)# exit


把端口给 vlan

switch(config)# interface fastethernet0/1  进入端口配置模式
switch(config)# switchport mode access 配置端口为 access 模式
switch(config)# swtchport access vlan 10 把端口划分给 vlan 10

一次把多个端口 分给某Vlan :interface range

xx(config-if-range)#interface range fa0/5 -6


查看 vlan 信息 

switch# show vlan




静态路由配置

了解静态原理



如:  
一网络  里面 三个网段
192.168.1.1
192.168.2.1
192.168.3.1

1.1 下面的电脑 要访问  2.1/3.1 
需要 数据包 发给 1.1 的路由器 
1.1 的路由器  由于没有 2.1/3.1 的路由
所以需要 手动来 配置  静态路由.
数据是双向的  .

路由器1 需要
ip route 192.168.2.0 255.255.255.0 10.1.12.2 
// 把 前往2.0网段的数据 发送给总的网关. 再进行转发.



动态路由:





静态路由:
网管 手工配置路由信息.
当拓扑图发生变化时候  网管要手工去改 路由表中的静态路由信息.

静态路由信息 默认情况下是 私有的 不会传递给别的路由器.
当然 网管可以通过对路由器进行设置使之成为共享的.


静态路由 适用简单网络环境. 网管比较了解网络的拓扑结构,方便正确设置路由信息.




 优点: 网络安全 保密性高. 很少占用路由器 cpu 和 RAM 和线路带宽










动态路由: 
路由器之间需要频繁的交换各自的路由表,
通过分析这些路由表 可以分析 出网络的 拓扑结构+网络地址等信息. 因此有安全隐患.	





大型网络  不宜选用静态路由 

一方面 网管难以全面了解 整个网络拓扑结构
另一面 当网络拓扑发生改变 静态路由表 需要大范围的调整 难度和复杂度非常高




静态路由举例:
> IP 省略前面的 192.168.

PCA (0.2 ) \<---\> ( 0.1 ) Router1 ( 1.1 )  \<---\> ( 1.2 ) Router2 ( 2.1 ) \<---? PCB ( 2.2 )


默认 A B 是不能通信的.
A 不知道 B 的网段 ( 也就是没有去玩 B 网段的路由表 ) 
B 不知道 A 的网段
→ 通信失败.

这时候 就需要 在
R1 R2 上 分别配置静态路由来使得 AB 可互通.

R1 上执行 添加静态路由的命令:
ip route 192.168.2.0 255.255.255.0 192.168.1.1 
// 告诉 R1 如果有去2.0网段的 IP 包, 将包发个 192.168.1.1

R2 上执行 
ip route 192.168.0.0 255.255.255.0 192.168.1.1
// 告诉 R2 如果有去0.0网段的 IP 包, 将包发个 192.168.1.2


这样 A→B 的包  会通过 R1 的 0.0网段 转给 1.1的网口 再转给R2的 1.2的网口 再转给2.0 网段



默认路由: ( 属于 静态路由的一种 )

指的是 当路由表中与包地址 之间没有匹配项目时 路由能做出选择,
如果 没有默认路由 那么 没有匹配项的包将被丢弃.




路由器得查看路由表 决定 如何转发数据包.
用静态路由 一个一个配置 太烦易错.






如果 路由器 有个邻居 知道怎么前往所有目的地 可以把路由表匹配任务交给他 省事.
这个邻居 就是网关. 
如果 路由器 连到网关, 那么 所有的数据包都会转发给网关.


默认路由 是 0.0.0.0 (就是 你 不去手动去设置网关)
匹配 ip 地址的时候 0 表示 wildcard / 通配符 . 任何值都可以.











静态路由信息在默认情况下是私有的，不会通告给其它路由器，也就是当在一个路由器上配置了某条静态路由时，它不会被通告到网络中相连的其它路由器上。但网络管理员还是可以通过重发布静态路由为其它动态路由，使得网络中其它路由器也可获此静态路由。


静态路由是具有单向性的，也就是它仅为数据提供沿着下一跳的方向进行路由，不提供反向路由。所以如果你想要使源节点与目标节点或网络进行双向通信，就必须同时配置回程静态路由。这在与读者朋友的交流中经常发现这样的问题，就是明明配置了到达某节点的静态路由，可还是ping不通，其中一个重要原因就是没有配置回程静态路由。


如果某条静态路由中间经过的跳数大于1（也就是整条路由路径经历了三个或以上路由器结点），则必须在除最后一个路由器外的其它路由器上依次配置到达相同目标节点或目标网络的静态路由，这就是静态路由的“接力”特性，否则仅在源路由器上配置这么静态路由还是不可达的。
   就像你要从长沙到北京去，假设中间要途经的站点包括：武汉-郑州-石家庄，可人家只告诉你目的地是北京，以及从长沙出发的下一站是武汉。对于一个没有多少旅游经验的人来说，你是不可能知道到了武汉后又该如何走，必须有人告诉你到了武汉后再怎么走，到了郑州后又该怎么走，……。这就是“接力性”。


经验之谈】路由器各端口上所直接连接的各个网络都是直接互通的，因为它们之间默认就有直连路由，无需另外配置其它路由。也即连接在同一路由器上的各网络之间的跳数为0。













































































































































































































